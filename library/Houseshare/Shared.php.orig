<?php

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 * Description of My_Houseshare_Shared
 *
 * @author marcin
 */
class My_Houseshare_Shared extends My_Houseshare_Accommodation {

    protected $_modelName = 'Table_Shared';
    /**
     * Model for the SHARED
     *
     * @var My_Model_Table_Shared
     */
    protected $_model = null;


    public function __construct($id = null) {
        parent::__construct($id);

        // $_acc should point to the ACCOMMODATION table, not SHARED table.
        $this->_acc = new parent($id);

        $this->_mergeProperties();
    }
//
//     public function __get($propertyName) {
//        if (array_key_exists($propertyName, $this->_properties)) {
//            return parent::__get($propertyName);
//        }
//     
//        // if not than use getter function to get the rest of data.
//        $getMethodName = 'get' . ucfirst($propertyName);
//
//        if (method_exists($this->_acc, $getMethodName)) {
//            return call_user_func(array($this->_acc,$getMethodName));
//        } else {
//            throw new Zend_Exception("Invalid property: $propertyName");
//        }
//    }

    public function getRoomates() {
        return 'a';
    }

    public function save() {

//        // insert/update roomate_id
//        $roomates_id = $this->_properties['state_id'];
//        if (in_array('roomates_id', $this->_changedProperties)) {
//            $stateModel = new My_Model_Table_Roomates();
//
//            $roomates_id = $stateModel->setRoomates(
//                            array('roomates_id' => $this->roomates_id)
//            );
//        }

//        // first save/update data for the user table and than accociated roomate table.
//        $user_id = $this->_user->_model->setUser($this->_properties, $this->user_id);
//        $looker_id = $this->_model->setLooker($this->_properties, $user_id);
//
//        // make sure that user_id is the same as roomate_id
//        if ($user_id !== $looker_id) {
//            throw new Zend_Exception(
//                    "Looker id = $looker_id does not match user id = $user_id"
//            );
//        }
//
//        // before re-populating properties delete all old ones.
//        $this->_makeProperties();
//        $this->_user->_populateProperties($user_id);
//        $this->_populateProperties($user_id);
//        $this->_mergeProperties();
//
//        return $user_id;
//
//
    }

}

?>
